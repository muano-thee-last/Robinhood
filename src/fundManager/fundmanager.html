<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fund Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="Wrapper2" id="fundmanager">
        <section class="form-box Applicant">
            <h2>Fund Manager</h2>
            <form id="accountForm" onsubmit="return false;">
                <section class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required>
                </section>
                <section class="form-group">
                    <label for="surname">Surname:</label>
                    <input type="text" id="surname" name="surname" required>
                </section>
                <section class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </section>
                <section class="form-group">
                    <label for="phone">Phone No:</label>
                    <input type="tel" id="phone" name="phone" required>
                </section>
                <section class="form-group">
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address" required>
                </section>
                <button type="button" id="createAccountBtn">Create account</button>
            </form>
        </section>
    </section>
    <script src="createFundingOpportunity.js" type="module"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js';
        import { getDatabase, ref, push,get } from 'https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js';

        // Firebase configuration
    const firebaseConfig = {
    apiKey: "AIzaSyCdFoWKRZQuKnjv20ry0tfdF-N70Pe5JiQ",
    authDomain: "letsgo-946e6.firebaseapp.com",
    databaseURL: "https://letsgo-946e6-default-rtdb.firebaseio.com",
    projectId: "letsgo-946e6",
    storageBucket: "letsgo-946e6.appspot.com",
    messagingSenderId: "41559700737",
    appId: "1:41559700737:web:ea3c57df878a3826281700",
    measurementId: "G-6W1NY2T4DW"
  };
        // Initialize Firebase
        const firebaseApp = initializeApp(firebaseConfig);
        const db = getDatabase(firebaseApp);
        const emailRef = ref(db, 'emails');
let userEmail = "";
// Function to create account
async function createAccount() {
    const name = document.getElementById('name').value;
    const surname = document.getElementById('surname').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
    const address = document.getElementById('address').value;
    userEmail = email;
    if (name && surname && email && phone && address) {
        try {
            // Fetch all emails from the database
            const snapshot = await get(emailRef);
            const emails = snapshot.val();

            if (emails) {
                // Check if the entered email already exists
                const emailExists = Object.values(emails).some(existingEmail => existingEmail === email);
                if (emailExists) {
                    alert('This email already exists.');
                } else {
                    // Save email to Firebase Realtime Database
                    await push(emailRef, email);
                    // Redirect the user to the next page
                    window.location.href = 'fundingmenager.html';
                }
            } else {
                // No emails in the database, save the email directly
                await push(emailRef, email);
                // Redirect the user to the next page
                window.location.href = 'fundingmenager.html';
            }
        } catch (error) {
            console.error('Error creating account:', error);
        }
    } else {
        alert('Please fill in all fields before creating an account.');
    }
}


// Attach event listener to the button after the document is loaded
document.addEventListener('DOMContentLoaded', function() {
    const createAccountBtn = document.getElementById('createAccountBtn');
    createAccountBtn.addEventListener('click', createAccount);
});
    </script>

</body>
</html>
